# ボス戦システム設計ドキュメント

**作成日**: 2025-11-26
**対象Phase**: Phase 4 - ボス戦実装
**前提条件**: Phase 2.5 (MVG) 完了、Phase 3 (成長システム) 完了

---

## 1. ボス基本仕様

### 1.1 ボスタイプ別HP・報酬設定

| ボスタイプ | HP | 出現条件 | ボスコア報酬 | スコアボーナス |
|------------|-----|----------|--------------|----------------|
| **初回ボス** (Early Boss) | 50 | 敵撃破数20体 | 1個 | +100 |
| **中ボス** (Mid Boss) | 120 | 敵撃破数50体 | 2個 | +300 |
| **最終ボス** (Final Boss) | 250 | 敵撃破数100体 | 3個 | +800 |

**設計根拠**:
- 初回ボス: パーツLv.0でも倒せる低難易度。プレイヤーHP100、通常敵ダメージ10を考慮し、5発程度の被弾でクリア可能
- 中ボス: Lv.1-2のパーツ強化を前提。HP120 = 初回ボスの2.4倍で適度な歯応え
- 最終ボス: Lv.3パーツを1-2個装備している想定。HP250でエンドコンテンツとして十分な難易度

**ボスコア報酬の妥当性**:
- パーツLv.3アップグレードには1-2個のボスコアが必要（`/Users/haya/副業/shooting2/3d-shooting-game/src/data/partsData.ts:36-38`）
- 初回ボス撃破で1個取得 → 最初のLv.3アップグレード可能
- 中ボス撃破で累計3個 → 2-3種類のパーツをLv.3に強化可能
- 最終ボス撃破で累計6個 → ほぼ全パーツのLv.3解禁に十分

---

### 1.2 移動パターン

#### 初回ボス: 固定位置 + 左右微動
- 座標: `(0, 1.5, -20)` - プレイヤーから十分離れた奥に配置
- 移動: 左右に振幅2.5、周期4秒で緩やかに揺れる（sin波）
- 理由: 初心者でも狙いやすい。動きが読みやすく、攻撃を避けることに集中できる

#### 中ボス: 円形軌道移動
- 軌道: 中心`(0, 1.5, -18)`、半径3.5の水平円
- 速度: 12秒/周
- 理由: プレイヤーの追従能力をテスト。動きながら撃つ技術が必要

#### 最終ボス: 8の字軌道 + ランダムダッシュ
- 基本軌道: 8の字パターン（縦方向の楕円2つ）
- 速度: 10秒/周
- 特殊行動: HP50%以下で5秒ごとに突進（プレイヤー方向へ速度3倍で2秒間移動）
- 理由: 最高難易度。予測困難な動きでプレイヤーのスキルを試す

---

### 1.3 サイズ・見た目（基本図形）

#### 初回ボス: "The Dreadnought"
```typescript
// メイン本体: 巨大な赤い直方体
hull: BoxGeometry(3.0, 1.8, 4.0)
color: 0xdc2626 (red-600), emissive: 0x991b1b

// コア（弱点部位）: 中央の青い球体
core: SphereGeometry(0.8)
color: 0x0ea5e9 (sky-500), emissive: 0x0369a1
position: (0, 0, 0) - 本体中央

// 砲塔: 左右2基
turret: CylinderGeometry(0.4, 0.4, 1.2)
color: 0xb91c1c (red-700)
positions: [(-1.2, 0.5, 1.0), (1.2, 0.5, 1.0)]
```

#### 中ボス: "The Destroyer"
```typescript
// メイン本体: 三角柱（前方が尖った形状）
hull: ConeGeometry(2.5, 5.0, 3) // 3角形
color: 0xa855f7 (purple-500), emissive: 0x7c3aed

// コア: 中央の黄色い球体
core: SphereGeometry(1.0)
color: 0xfbbf24 (amber-400), emissive: 0xf59e0b

// ウイング: 左右に大きな翼
wing: BoxGeometry(4.0, 0.2, 2.0)
color: 0x9333ea (purple-600)
positions: [(-2.5, 0, 0), (2.5, 0, 0)]
```

#### 最終ボス: "The Annihilator"
```typescript
// メイン本体: 複数のリング構造
mainRing: TorusGeometry(2.5, 0.5, 16, 32)
color: 0xef4444 (red-500), emissive: 0xdc2626, metalness: 0.8

// コア: 中央の巨大な球体（2段階発光）
core: SphereGeometry(1.5)
color: HP > 50%時 0x0ea5e9 (sky-500), HP <= 50%時 0xef4444 (red-500)
emissive: HP依存で強度変化 (0.5 → 1.0)

// サブリング: 90度回転した副リング
subRing: TorusGeometry(2.0, 0.3, 12, 24)
rotation: (Math.PI / 2, 0, 0)
```

---

## 2. 攻撃パターン設計

### 2.1 初回ボス攻撃パターン（3種）

#### パターンA: 単発狙い撃ち
- **発動条件**: 常時（1.8秒間隔）
- **弾数**: 1発
- **弾速**: 18 units/sec
- **ダメージ**: 8
- **挙動**: プレイヤーの現在位置を狙って発射
- **避け方**: 左右にステップ移動で回避可能

#### パターンB: 3-way弾幕
- **発動条件**: HP 50%以下、2.5秒間隔
- **弾数**: 3発（中央 + 左右15度ずつ）
- **弾速**: 16 units/sec
- **ダメージ**: 各6
- **挙動**: プレイヤー方向を中心に扇状に発射
- **避け方**: 弾の隙間を縫って前進または後退

#### パターンC: 突進（接触ダメージ）
- **発動条件**: HP 30%以下、8秒間隔
- **挙動**: プレイヤー方向へ速度25で3秒間直進
- **ダメージ**: 20（接触時）
- **避け方**: 横方向に大きく回避

---

### 2.2 中ボス攻撃パターン（4種）

#### パターンA: 追尾弾（ホーミング）
- **発動条件**: 常時、2秒間隔
- **弾数**: 2発（左右砲塔から）
- **弾速**: 14 units/sec
- **追尾性能**: turnRate 1.5 rad/sec
- **ダメージ**: 各10
- **避け方**: 円形軌道で誘導を振り切る

#### パターンB: 円形弾幕（12-way）
- **発動条件**: HP 70%以下、5秒間隔
- **弾数**: 12発（360度均等配置）
- **弾速**: 12 units/sec
- **ダメージ**: 各5
- **挙動**: ボス中心から放射状に全方位発射
- **避け方**: 弾の隙間（30度間隔）を見極めて移動

#### パターンC: レーザービーム（警告付き）
- **発動条件**: HP 40%以下、10秒間隔
- **挙動**:
  1. 1秒間チャージ（赤い予告線表示）
  2. プレイヤー方向へ幅0.8、長さ50のレーザー3秒間照射
- **ダメージ**: 15/sec（触れている間継続ダメージ）
- **避け方**: チャージ中に左右へ大きく移動

#### パターンD: 機雷散布
- **発動条件**: HP 60%以下、7秒間隔
- **弾数**: 5個の浮遊機雷
- **挙動**: ランダム位置（プレイヤー周辺半径5以内）に設置、8秒後自爆
- **ダメージ**: 12（接触または自爆の爆風半径2.0以内）
- **避け方**: 機雷の位置を把握し、遠くから破壊または範囲外退避

---

### 2.3 最終ボス攻撃パターン（5種）

#### パターンA: 高速狙い撃ち3連射
- **発動条件**: 常時、1.2秒間隔
- **弾数**: 3発（0.15秒間隔で連続発射）
- **弾速**: 30 units/sec
- **ダメージ**: 各12
- **避け方**: ジグザグ移動で1-2発は回避可能

#### パターンB: 螺旋弾幕
- **発動条件**: HP 80%以下、4秒間隔
- **弾数**: 20発（18度間隔で回転しながら発射）
- **弾速**: 10 units/sec
- **回転**: 初期角度が毎回30度ずつ回転（予測困難化）
- **ダメージ**: 各8
- **避け方**: 螺旋の中心付近で待機、または外周をタイミングよく抜ける

#### パターンC: ホーミングミサイル群
- **発動条件**: HP 60%以下、6秒間隔
- **弾数**: 4発（0.3秒間隔で順次発射）
- **弾速**: 16 units/sec
- **追尾性能**: turnRate 2.5 rad/sec（中ボスより高精度）
- **ダメージ**: 各15
- **避け方**: ミサイルを引き連れて8の字移動で時間稼ぎ、1発ずつ対処

#### パターンD: エリア制圧レーザー（3本同時）
- **発動条件**: HP 40%以下、12秒間隔
- **挙動**:
  1. 1.5秒チャージ（3本の予告線）
  2. 幅0.6のレーザーを120度ずつ異なる方向に4秒間照射し、毎秒30度回転
- **ダメージ**: 20/sec
- **避け方**: レーザーの隙間（狭い安全地帯）で回転に合わせて移動

#### パターンE: 雑魚敵召喚
- **発動条件**: HP 20%以下、15秒間隔（1回のみ）
- **挙動**: 通常敵（Enemy.ts）を6体同時出現
- **位置**: ボス周辺のランダム位置
- **理由**: 最終局面で画面が混沌とし、プレイヤーの対応力を試す

---

## 3. 弱点システム（オプション実装）

### 3.1 弱点部位: コア（Core）

全ボス共通で中央に配置された球体が弱点部位。

#### 弱点判定仕様
- **ヒットボックス**: コアのSphereGeometry範囲（初回0.8、中1.0、最終1.5）
- **通常部位ダメージ**: プレイヤー弾のダメージ × 1.0
- **弱点部位ダメージ**: プレイヤー弾のダメージ × 2.0（2倍）
- **視覚フィード**: ヒット時にコアが0.2秒間白く発光（emissiveIntensity 2.0に瞬間変化）

#### 実装上の注意
- 衝突判定を`Collision.ts`に追加: `checkBulletBossCoreCollision(bullet, bossCore)`
- コアは別オブジェクトとして管理し、ボス本体とは独立して判定

### 3.2 Phase 4.1での簡略実装案

Phase 4.1（最小ボス実装）では弱点システムを**スキップ**し、単純なHP削りのみで実装。
- 理由: 弱点判定の実装コストが高く、MVGとしては不要
- Phase 4.3で余裕があれば追加実装を検討

---

## 4. ボス戦フロー

### 4.1 ボス出現条件

| ボスタイプ | 出現トリガー | 出現位置 | 出現演出 |
|------------|-------------|----------|----------|
| 初回ボス | 敵撃破数 = 20体 | (0, 1.5, -25) | 画面奥からスライドイン（2秒かけてz: -25 → -20） |
| 中ボス | 敵撃破数 = 50体 | (0, 1.5, -25) | 同上 + 警告テキスト "WARNING: MID BOSS APPROACHING" |
| 最終ボス | 敵撃破数 = 100体 | (0, 1.5, -25) | 同上 + 警告テキスト "DANGER: FINAL BOSS DETECTED" + 画面赤フラッシュ |

**実装メモ**:
- `Game.ts`に`enemyKillCount`カウンターを追加
- `checkBulletEnemyCollisions`内で敵撃破時にインクリメント
- `update()`でカウントをチェックし、条件達成時に`spawnBoss(type)`呼び出し

---

### 4.2 ボス戦中の通常敵出現

#### Phase 4.1-4.2: 通常敵は出現停止
- ボス出現中は`EnemyManager.update()`をスキップ
- 理由: 画面が混雑しすぎると初心者が対処不可能。ボス戦に集中させる

#### Phase 4.3以降（オプション）: 最終ボスのみ雑魚敵召喚
- 最終ボスの攻撃パターンEで雑魚敵6体を召喚（前述）
- 召喚された敵は通常敵と同じ挙動だが、ボス撃破数にはカウントしない

---

### 4.3 撃破時の報酬

#### 即座に付与される報酬
```typescript
// ボス撃破時の処理例（Game.ts）
private onBossDefeated(bossType: 'early' | 'mid' | 'final'): void {
  const rewards = {
    early: { bossCore: 1, scoreBonus: 100 },
    mid: { bossCore: 2, scoreBonus: 300 },
    final: { bossCore: 3, scoreBonus: 800 }
  }

  const reward = rewards[bossType]
  this.partsManager.addBossCore(reward.bossCore)
  this.hud.addScore(reward.scoreBonus)

  // 演出: 画面中央に "BOSS DEFEATED! +X Boss Cores" 表示（3秒間）
  this.showRewardNotification(reward)
}
```

#### 報酬演出の詳細
- テキスト表示: DOM overlay（`HUD.ts`に`showNotification()`メソッド追加）
- フォント: 48px, 太字, 黄色（#fbbf24）
- アニメーション: フェードイン0.5秒 → 2秒表示 → フェードアウト0.5秒
- BGM（Phase 5で実装）: 勝利ジングル（3秒）

---

### 4.4 敗北時の処理

#### ボス戦中にHP 0になった場合
- 既存のゲームオーバー処理をそのまま適用（`GameOver.ts`）
- ゲームオーバー画面に追加表示:
  - "Defeated by: [ボス名]"
  - "Boss HP Remaining: [残りHP]"（プレイヤーがあと少しだったかを可視化）

#### リトライ時の動作
- `restart()`実行時にボス撃破数カウンターもリセット
- ボスは消滅し、通常の敵出現フローに戻る
- 既に獲得したボスコアは**保持される**（リセットしない）
  - 理由: プレイヤーの成長要素を尊重し、何度か挑戦すれば強化できるようにする

---

## 5. 実装優先度（段階的開発）

### Phase 4.1: 最小ボス実装（MVP）

**目標**: 1種類のボスで基本動作を確認

**実装内容**:
- `Boss.ts`クラス作成
  - プロパティ: `hp`, `maxHp`, `position`, `attackTimer`
  - メソッド: `update()`, `takeDamage()`, `isDefeated()`
- 初回ボスのみ実装
  - HP: 50
  - 移動: 左右微動
  - 攻撃: パターンA（単発狙い撃ち）のみ
- `Game.ts`に統合
  - `enemyKillCount`カウンター
  - ボス出現トリガー（20体撃破時）
  - ボス弾とプレイヤーの衝突判定
  - ボス撃破時の報酬付与
- `HUD.ts`にボスHP表示（画面上部に赤いバー）

**成功条件**:
- ボスが出現し、攻撃し、HPが0になると消滅する
- ボスコア1個が正常に付与される
- テスト: `Boss.test.ts`で基本動作を検証

**工数見積もり**: 約200行（`Boss.ts` 120行 + `Game.ts`修正 50行 + `HUD.ts`修正 30行）

---

### Phase 4.2: 攻撃パターン追加

**目標**: 初回ボスを完成させ、中ボスを追加

**実装内容**:
- 初回ボスに3-way弾幕と突進を追加
- 中ボス実装
  - HP: 120
  - 移動: 円形軌道
  - 攻撃: パターンA（追尾弾）、パターンB（円形弾幕）
- `BossBullet.ts`クラス作成（ホーミング弾用）
  - `update()`内で`target`方向に`turnRate`で回転
- 攻撃パターンの発動条件管理（HP依存の条件分岐）

**成功条件**:
- 初回ボスと中ボスが異なる挙動をする
- ホーミング弾がプレイヤーを追尾する
- 円形弾幕が全方位に発射される

**工数見積もり**: 約180行（`Boss.ts`拡張 80行 + `BossBullet.ts` 70行 + `Game.ts`修正 30行）

---

### Phase 4.3: 複数ボス・弾幕システム完成

**目標**: 最終ボスとすべての攻撃パターンを実装

**実装内容**:
- 最終ボス実装
  - HP: 250
  - 移動: 8の字軌道 + ランダムダッシュ
  - 攻撃: 全5パターン（螺旋弾幕、エリア制圧レーザー、雑魚敵召喚含む）
- `BossLaser.ts`クラス作成
  - レーザーの描画（`CylinderGeometry`を動的に伸縮）
  - 継続ダメージ判定（フレームごとにプレイヤーとの衝突チェック）
- 弱点システム（オプション）
  - コア部位の個別衝突判定
  - ダメージ倍率適用
- 演出強化
  - ボス撃破時のエフェクト（爆発アニメーション）
  - 警告表示の実装

**成功条件**:
- 3種類すべてのボスが出現し、倒せる
- すべての攻撃パターンが正常に動作する
- ボスコアが正しく付与され、Lv.3アップグレードが可能

**工数見積もり**: 約250行（`Boss.ts`拡張 120行 + `BossLaser.ts` 80行 + 演出・UI 50行）

---

### 累計工数見積もり
- Phase 4.1: 200行
- Phase 4.2: 180行
- Phase 4.3: 250行
- **合計**: 約630行（3 commitに分割して実装）

---

## 6. ゲームバランス分析

### 6.1 初心者がクリア可能か？

#### 初回ボス（パーツLv.0想定）

**プレイヤースペック**:
- HP: 100
- 移動速度: 12 units/sec
- 弾ダメージ: 1
- 連射速度: 0.18秒間隔

**ボススペック**:
- HP: 50
- 攻撃: 単発狙い撃ち（1.8秒間隔、ダメージ8）

**シミュレーション**:
1. ボス撃破に必要な弾数: 50発
2. 連射速度0.18秒 × 50発 = 9秒（全弾命中の場合）
3. 実際の命中率を60%と仮定 → 約15秒
4. 15秒間でボスが発射する弾数: 15秒 ÷ 1.8秒 ≈ 8発
5. 回避率を50%と仮定 → 4発被弾 × 8ダメージ = 32ダメージ
6. 残りHP: 100 - 32 = 68（生存）

**結論**: 初心者でも回避が下手でも**クリア可能**。

---

#### 中ボス（パーツLv.1-2想定）

**プレイヤースペック**:
- HP: 120（シールドジェネレーターLv.1）
- 弾ダメージ: 1（またはLv.2で2）
- 移動速度: 14.4（ブースターLv.1）

**ボススペック**:
- HP: 120
- 攻撃: 追尾弾（2秒間隔、各10ダメージ） + 円形弾幕（5秒間隔、各5ダメージ × 12発）

**シミュレーション**:
1. ボス撃破時間: 約25-30秒（命中率60%、ダメージ1の場合）
2. 追尾弾: 30秒 ÷ 2秒 = 15回 → 回避率40%で9発被弾 × 10 = 90ダメージ
3. 円形弾幕: 30秒 ÷ 5秒 = 6回 → 1回あたり2-3発被弾（隙間回避）× 5 = 10-15ダメージ × 6回 = 60-90ダメージ
4. 合計被弾: 150-180ダメージ → **HP120では撃破される**

**対策**:
- アーマープレートLv.1（ダメージ軽減20%）を装備 → 被ダメージ120-144 → **ギリギリ生存可能**
- またはレーザーキャノンLv.2（ダメージ2、弾速UP）で戦闘時間を半減 → 被弾回数減少

**結論**: Lv.1-2のパーツを**1-2個装備すればクリア可能**。無強化ではほぼ不可能（意図的な難易度設計）。

---

#### 最終ボス（パーツLv.3想定）

**プレイヤースペック**:
- HP: 200（シールドジェネレーターLv.3）
- 弾ダメージ: 2（レーザーキャノンLv.3）
- 移動速度: 16.8（ブースターLv.2）
- ダメージ軽減: 35%（アーマープレートLv.2）

**ボススペック**:
- HP: 250
- 攻撃: 高速3連射 + 螺旋弾幕 + ホーミングミサイル + エリアレーザー + 雑魚敵召喚

**シミュレーション**:
1. ボス撃破時間: 約40-50秒（命中率70%、ダメージ2）
2. 各攻撃パターンの被弾想定:
   - 高速3連射: 50秒 ÷ 1.2秒 = 41回 → 1回あたり1発被弾 × 12 = 492ダメージ（軽減後320ダメージ）
   - 螺旋弾幕: 50秒 ÷ 4秒 = 12回 → 1回あたり2発被弾 × 8 = 192ダメージ（軽減後125ダメージ）
   - ホーミング: 適度に回避 → 4発被弾 × 15 = 60ダメージ（軽減後39ダメージ）
   - エリアレーザー: 1回被弾（2秒間触れる） × 20ダメージ/sec = 40ダメージ（軽減後26ダメージ）
3. 合計被ダメージ: 約510ダメージ → **HP200では撃破される**

**対策**:
- オートリペアLv.3（3秒ごとに12 HP回復）を併用 → 50秒で約200 HP回復
- または連射速度UP（マルチショットLv.3）で戦闘時間を30秒に短縮 → 被弾回数を2/3に削減

**結論**: Lv.3パーツを**3-4個装備すればクリア可能**。高いプレイヤースキルも要求される。

---

### 6.2 パーツ強化なしで倒せるか？

#### 初回ボス
- **可能**（前述のシミュレーション参照）
- 回避が上手ければHP70以上残してクリア可能

#### 中ボス
- **ほぼ不可能**
- パーツLv.1を1-2個装備することが**事実上の必須条件**
- これによりプレイヤーはショップを使わざるを得なくなる（成長システムへの誘導）

#### 最終ボス
- **完全に不可能**
- Lv.3パーツが複数必要 → ボスコア収集の必然性

**設計意図**: 段階的に強化を促し、成長システムとボス戦が相互に依存する構造。

---

### 6.3 ボスコアドロップ数は適切か？

#### 必要なボスコア総数
パーツLv.3に必要なボスコア（`partsData.ts`より）:
- レーザーキャノン Lv.3: 1個
- マルチショット Lv.3: 1個
- ホーミングミサイル Lv.3: 2個
- シールドジェネレーター Lv.3: 1個
- アーマープレート Lv.3: 1個
- オートリペア Lv.3: 2個
- ブースター Lv.3: 1個
- クイックターン Lv.3: 1個
- スコアブースター Lv.3: 1個
- シールドリチャージ Lv.3: 2個

**合計**: 13個

#### ドロップ数
- 初回ボス: 1個
- 中ボス: 2個
- 最終ボス: 3個
- **合計**: 6個（1周で）

#### 分析
- 1周で6個 → 全パーツのLv.3解禁には**2周必要**
- ただし、実際にはプレイヤーは**4-5個**のパーツを優先して強化すると想定
  - 例: レーザーキャノン + シールドジェネレーター + ブースター + アーマープレート = 4個
- この場合、1周で必要なボスコアを獲得可能

**結論**: ボスコアドロップ数は**適切**。全パーツ最大強化を目指すプレイヤーには2周プレイのリプレイ性を提供。

---

### 6.4 懸念点と緩和策

#### 懸念1: 初心者が中ボスで詰まる可能性
**緩和策**:
- チュートリアル（Phase 5）で「初回ボス撃破後はショップで強化してください」とヒント表示
- ゲームオーバー画面に「Tip: Try upgrading your parts before challenging this boss」と追記

#### 懸念2: 最終ボスの難易度が高すぎる可能性
**緩和策**:
- テストプレイで調整
- HP 250 → 200に減少、または攻撃間隔を+0.5秒延長
- Phase 4.3実装時にバランス調整用の定数を`Boss.ts`上部に集約（`FINAL_BOSS_HP`, `ATTACK_INTERVAL_MULTIPLIER`など）

#### 懸念3: ボス戦が単調になる可能性
**緩和策**:
- Phase 5でBGM追加（ボス戦専用の緊迫した曲）
- 攻撃パターンのランダム性を高める（現在は固定発動だが、HP依存に加えてランダム選択も導入）
- 弱点システム（Phase 4.3）でプレイヤーの狙いどころを意識させる

---

## 7. 実装上の技術的注意点

### 7.1 パフォーマンス
- ボス弾は最大50発まで（`BossBulletPool`で管理）
- レーザーは1フレームあたり最大3本まで（最終ボスのパターンD）
- 雑魚敵召喚時は`EnemyManager`のキャパシティ内（18体）で収まるようチェック

### 7.2 衝突判定
- `Collision.ts`に`checkBossBulletPlayerCollision()`追加
- `checkPlayerBulletBossCollision()`でボス本体との判定
- 弱点システム実装時は`checkPlayerBulletBossCoreCollision()`を別途追加

### 7.3 状態管理
- ボスの状態: `idle`, `attacking`, `defeated`, `exiting`の4状態
- `Game.ts`の`update()`内で`bossState`を管理し、通常敵の出現をトグル

### 7.4 テスト
- `Boss.test.ts`で各攻撃パターンの発動条件をテスト
- ダメージ計算のロジックをモックで検証
- HP依存の条件分岐（50%, 30%など）が正しく動作するかテスト

---

## 8. まとめと次のステップ

### 設計のポイント
1. **段階的難易度**: 初回ボス（Lv.0可）→ 中ボス（Lv.1-2必須）→ 最終ボス（Lv.3必須）
2. **成長システムとの統合**: ボスコアドロップでLv.3解禁 → 次のボスに挑戦可能
3. **攻撃パターンの多様性**: 3種（初回）→ 4種（中）→ 5種（最終）で飽きさせない
4. **初心者配慮**: 初回ボスは無強化でもクリア可能、中ボス以降は強化を促す

### Phase 4.1実装開始のチェックリスト
- [ ] `Boss.ts`クラス設計
- [ ] `Game.ts`に`enemyKillCount`追加
- [ ] `HUD.ts`にボスHP表示追加
- [ ] 初回ボスの見た目作成（BoxGeometry + SphereGeometry）
- [ ] 単発狙い撃ち攻撃の実装
- [ ] ボス弾とプレイヤーの衝突判定
- [ ] ボス撃破時の報酬付与ロジック
- [ ] `Boss.test.ts`作成

### PORへの反映
- `docs/por/POR.md`のPhase 4セクションを更新
- Aux Delegationsの「ボス攻撃パターン設計」を完了としてマーク

---

**参照ファイル**:
- `/Users/haya/副業/shooting2/3d-shooting-game/src/core/Enemy.ts:11-19` - 敵の基本定数
- `/Users/haya/副業/shooting2/3d-shooting-game/src/core/Player.ts:24-29` - プレイヤーの定数
- `/Users/haya/副業/shooting2/3d-shooting-game/src/data/partsData.ts:1-378` - パーツバランス
- `/Users/haya/副業/shooting2/3d-shooting-game/src/core/Game.ts:140-157` - 衝突判定処理
- `/Users/haya/副業/shooting2/3d-shooting-game/docs/por/POR.md:1-85` - プロジェクト状態

**作成者メモ**: このドキュメントはPhase 3完了後、Phase 4.1開始前にPeerBが参照する実装ガイドとして機能する。数値は仮であり、Phase 4.2でのテストプレイ後に調整すること。
